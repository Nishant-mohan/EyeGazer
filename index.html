<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EyeGazer</title>
</head>
<body>
    
</body>
<script src="webgazer.js" type="text/javascript"></script>
<script>
        // Initialize WebGazer
        webgazer.setGazeListener(function(data, elapsedTime) {
        if (data == null) {
            return;
        }
        var xprediction = data.x; // X coordinates relative to the viewport
        var yprediction = data.y; // Y coordinates relative to the viewport
        console.log("Gaze detected at: ", xprediction, yprediction);
        console.log("Elapsed time: ", elapsedTime); // Elapsed time since begin was called
    }).begin();

    // Ensure WebGazer is ready
    webgazer.showVideoPreview(true).showPredictionPoints(true); // Optional: Shows the video preview and the prediction points.

    // Add a delay or check to see if WebGazer is calibrated
    function checkPrediction() {
        var prediction = webgazer.getCurrentPrediction();
        if (prediction) {
            var x = prediction.x;
            var y = prediction.y;
            if(x!=undefined&&y!=undefined){
                console.log("Prediction coordinates: ", x, y);

            }
        } else {
            console.log("Model not ready or no prediction yet.");
        }
    }

    // Periodically check for predictions (use interval after initialization)
    setInterval(checkPrediction, 1000); // Check every second

</script>
</html>